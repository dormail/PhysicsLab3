\section{Procedure}
\label{sec:procedure}
The optical arrangement is sketched in \autoref{fig:setup} and will be explained in the following
paragraphs. 

\begin{figure}
  \centering
  \begin{tikzpicture}
    \draw[gray, thick] (-3.5,-0.2) rectangle (-2.5,0.2); 
    \node[below] at (-3,-0.2) {Laser source};
    \draw[red, thick] (-2.5,0) -- (-1.1,0); 

    \draw[gray, thick] (-1.1,-0.2) rectangle (-0.9,0.2); 
    \node[below] at (-1,-0.2) {Polarizer};

    \draw[red, thick] (-0.9,0) -- (0.9,0); 

    \draw[gray, thick] (0.9,-0.2) rectangle (1.1,0.2); 
    \node[below] at (1,-0.2) {Polarizer};

    \draw[red, thick] (1.1,0) -- (2.5,0); 
    \draw[gray, thick] (2.3,-0.2) rectangle (2.7,0.2); 
    \draw[dashed] (2.3,-0.2) -- (2.7,0.2);
    \node[below] at (2.5,-0.2) {PBS};

    \draw[gray, thick] (2.3,1) -- (2.7,1) arc(0:180:0.2) --cycle;

    \draw[gray, thick] (3.5,0.2) -- (3.5,-0.2) arc(-90:90:0.2) --cycle;
    \node[above] at (3.6,0.8) {Detectors};

    \draw[red, dashed] (2.5,0.2) -- (2.5,1);
    \draw[red, dashed] (2.5,0) -- (3.5,0);

    \draw[gray, thin, dashed] (-4,-1) rectangle (-0.2,1.5);
    \node[below] at (-2,-1) {Sending party};

    \draw[gray, thin, dashed] (0.2,-1) rectangle (4.5,1.5);
    \node[below] at (2,-1) {Receiving party};
  \end{tikzpicture}
    \caption{Optical setup to test the BB84 protocoll with light polarization states. The intensity
      of each light
      beam after passing the polarizing beam splitter (PBS) depends on the two polarizer settings and
  the initial polarization of the laser.}
  \label{fig:setup}
\end{figure}

The setup can be split up in the sender`s side and the receiving part. The laser and polarizing
rotator send a beam with a fixed polarization. The rotator can be set to four angles referring to
the four possible combinations of bits and bases. As a convention we will use the convention listed
in \autoref{tab:bit-encoding}.

\begin{table}
  \centering
  \caption{Encoding of a (bit, base) tuple as polarizing angle at the first rotating polarizer.}
  \label{tab:bit-encoding}
  \sisetup{table-format=2.1}
  \begin{tabular}{c c c}
    Bit & Base & Angle \\
    \hline
    0 & $Z$ & $0^\circ$ \\
    1 & $Z$ & $90^\circ$ \\
    0 & $X$ & $-45^\circ$ \\
    1 & $X$ & $45^\circ$ \\
  \end{tabular}
\end{table}

The second polarizer then has two positions, $0^\circ$ and $45^\circ$ corresponing to $Z$ and $X$
base. 

For the initial setup, the laser pointer has to be rotated such that one detector has a maximal
intensity without the rotating polarizers. This detector is then the ``0`` detector.

For sending and receiving the angles then have to be adjusted as explained and the detector
controller has to be put in the adjust mode, the LED on the control unit should appear green. With
those settings, a LED on the detector with stronger intensity ligths up, which will be the detected
``0`` or ``1``.
